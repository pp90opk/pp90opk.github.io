{"openapi":"3.0.0","info":{"description":"Describes the interface for the per-tenant enclave service.","title":"AttestationClient","version":"2018-09-01-preview","x-apisguru-categories":["cloud"],"x-logo":{"url":"https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png"},"x-origin":[{"format":"swagger","url":"https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/specification/attestation/data-plane/Microsoft.Attestation/preview/2018-09-01-preview/attestation.json","version":"2.0"}],"x-providerName":"azure.com","x-serviceName":"attestation","x-tags":["Azure","Microsoft"]},"paths":{"/.well-known/openid-configuration":{"get":{"description":"Retrieves metadata about the attestation signing keys in use by the  attestation service","operationId":"MetadataConfiguration_Get","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"400":{"description":"Error processing the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"default":{"description":"Error response describing why the operation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Retrieves the OpenID Configuration data for the Azure Attestation Service","tags":["attestation"]}},"/certs":{"get":{"description":"Retrieves attestation signing keys in use by the attestation service","operationId":"Certs_Get","responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"400":{"description":"Error processing the request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"default":{"description":"Error response describing why the operation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Retrieves the OpenID Configuration data for the Azure Attestation Service","tags":["attestation"]}},"/operations/policy/current":{"get":{"operationId":"Policy_Get","parameters":[{"$ref":"#/components/parameters/ApiVersionParameter"},{"$ref":"#/components/parameters/TeeKind"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttestationPolicy"},"examples":{"Get Policy":{"$ref":"#/components/examples/Get_Policy"}}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"Get Policy":{"$ref":"#/components/examples/Get_Policy"}}}}},"401":{"description":"Request is unauthorized","content":{"application/json":{"schema":{"type":"string"}}}},"default":{"description":"Error response describing why the operation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Retrieves the current policy for a given kind of TEE.","tags":["policy"]},"post":{"operationId":"Policy_Reset","parameters":[{"$ref":"#/components/parameters/ApiVersionParameter"},{"$ref":"#/components/parameters/TeeKind"}],"requestBody":{"content":{"text/plain":{"schema":{"type":"string"}}},"description":"JSON Web Signature with an empty policy document","required":true,"x-ms-client-flatten":true},"responses":{"200":{"description":"Success - Returns a JWT signed by the metadata signing key that contains the hash of the supplied policy to be set.","content":{"application/json":{"schema":{"type":"string"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"Reset Policy":{"$ref":"#/components/examples/Reset_Policy"}}}}},"401":{"description":"Request is unauthorized","content":{"application/json":{"schema":{"type":"string"}}}},"default":{"description":"Error response describing why the operation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Resets the attestation policy for the specified tenant and reverts to the default policy.","tags":["policy"]},"put":{"operationId":"Policy_Set","parameters":[{"$ref":"#/components/parameters/ApiVersionParameter"},{"$ref":"#/components/parameters/TeeKind"}],"requestBody":{"content":{"text/plain":{"schema":{"type":"string"}}},"description":"JWT Expressing the new policy","required":true,"x-ms-client-flatten":true},"responses":{"200":{"description":"Success"},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"Set Policy":{"$ref":"#/components/examples/Set_Policy"}}}}},"401":{"description":"Request is unauthorized","content":{"application/json":{"schema":{"type":"string"}}}},"default":{"description":"Error response describing why the operation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Sets the policy for a given kind of TEE.","tags":["policy"]}},"/operations/policy/updatepolicy":{"post":{"operationId":"Policy_PrepareToSet","parameters":[{"$ref":"#/components/parameters/ApiVersionParameter"},{"$ref":"#/components/parameters/TeeKind"}],"requestBody":{"content":{"text/plain":{"schema":{"type":"string"}}},"description":"JSON Web Signature (See RFC7515) expressing the new policy","required":true,"x-ms-client-flatten":true},"responses":{"200":{"description":"Success - Returns a JWT signed by the metadata signing key that contains the hash of the supplied policy to be set.","content":{"text/plain":{"schema":{"type":"string"},"examples":{"UpdatePolicy":{"$ref":"#/components/examples/UpdatePolicy"}}},"application/json":{"schema":{"type":"string"},"examples":{"UpdatePolicy":{"$ref":"#/components/examples/UpdatePolicy"}}}}},"400":{"description":"Bad request","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"UpdatePolicy":{"$ref":"#/components/examples/UpdatePolicy"}}},"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"},"examples":{"UpdatePolicy":{"$ref":"#/components/examples/UpdatePolicy"}}}}},"401":{"description":"Request is unauthorized","content":{"text/plain":{"schema":{"type":"string"}},"application/json":{"schema":{"type":"string"}}}},"default":{"description":"Error response describing why the operation failed","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/CloudError"}},"application/json":{"schema":{"$ref":"#/components/schemas/CloudError"}}}}},"summary":"Accepts a new policy document and returns a JWT which expresses  used in preparation to set attestation policy.","tags":["policy"]}}},"servers":[{"url":"https://azure.local"},{"url":"{tenantBaseUrl}","variables":{"tenantBaseUrl":{"description":"The tenant name, for example https://mytenant.attest.azure.net.","x-ms-parameter-location":"client","x-ms-skip-url-encoding":true,"default":"none"}}}],"components":{"examples":{"Reset_Policy":{"value":{"error":{"code":"400","message":"error message"}}},"Get_Policy":{"value":{"error":{"code":"400","message":"error message"}}},"Set_Policy":{"value":{"error":{"code":"400","message":"error message"}}},"UpdatePolicy":{"value":{"error":{"code":"400","message":"error message"}}}},"parameters":{"ApiVersionParameter":{"description":"Client API version.","in":"query","name":"api-version","required":true,"schema":{"type":"string","enum":["2018-09-01-preview"]},"examples":{"Get Policy":{"value":"2018-09-01-preview"},"Reset Policy":{"value":"2018-09-01-preview"},"Set Policy":{"value":"2018-09-01-preview"},"UpdatePolicy":{"value":"2018-09-01-preview"}}},"TeeKind":{"description":"Specifies the trusted execution environment to be used to validate the evidence","in":"query","name":"tee","required":true,"x-ms-enum":{"modelAsString":true,"name":"TeeKind","values":[{"description":"Intel Software Guard eXtensions","value":"SgxEnclave"},{"description":"OpenEnclave extensions to SGX","value":"OpenEnclave"},{"description":"IoT Edge validation","value":"CyResComponent"},{"description":"Azure Guest Attestation","value":"AzureGuest"}]},"x-ms-parameter-location":"method","schema":{"type":"string","enum":["SgxEnclave","OpenEnclave","CyResComponent","AzureGuest"]},"examples":{"Get Policy":{"value":"SgxEnclave"},"Reset Policy":{"value":"SgxEnclave"},"Set Policy":{"value":"SgxEnclave"},"UpdatePolicy":{"value":"SgxEnclave"}}}},"securitySchemes":{"azure_auth":{"description":"Azure Active Directory OAuth2 Flow","type":"oauth2","flows":{"implicit":{"authorizationUrl":"https://login.microsoftonline.com/common/oauth2/authorize","scopes":{"user_impersonation":"impersonate your user account"}}}}},"schemas":{"AttestationPolicy":{"properties":{"policy":{"description":"String-encoded attestation policy document.","type":"string"}},"type":"object"},"CloudError":{"description":"An error response from Attestation.","properties":{"error":{"$ref":"#/components/schemas/CloudErrorBody"}},"x-ms-external":true},"CloudErrorBody":{"description":"An error response from Attestation.","properties":{"code":{"description":"An identifier for the error. Codes are invariant and are intended to be consumed programmatically.","type":"string"},"message":{"description":"A message describing the error, intended to be suitable for displaying in a user interface.","type":"string"}},"x-ms-external":true}}}}